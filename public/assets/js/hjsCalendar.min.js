var DateArray = [];
function hjsCalendar(e) {
    document.getElementById("hjsCalendar").innerHTML = `
    <div class="">
        <div class="justify-content-center" style="display: flex;flex-wrap: wrap;">
            <div class="col-12">
                <div class="calendar mx-auto pb-3 px-2">
                    <div class="d-flex align-items-center justify-content-between text-uppercase month py-4">
                        <div class="fw-bold ms-3" id="date"></div>
                        <div class="d-flex align-items-center justify-content-center gap-3">
                            <div class="d-flex align-items-center justify-content-center rounded-circle" id="prev">
                                <i class="fa fa-angle-left"></i>
                            </div>
                            <div class="d-flex align-items-center justify-content-center rounded-circle" id="nxt">
                                <i class="fa fa-angle-right"></i>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex align-items-center justify-content-between text-uppercase fw-light h-100 mb-2 text-sm w-100 weekdays">
                        <div class="fw-bold">Sun</div>
                        <div class="fw-bold">Mon</div>
                        <div class="fw-bold">Tue</div>
                        <div class="fw-bold">Wed</div>
                        <div class="fw-bold">Thu</div>
                        <div class="fw-bold">Fri</div>
                        <div class="fw-bold">Sat</div>
                    </div>
                    <div class="d-flex justify-content-between w-100 flex-wrap" id="days"></div>
                </div>
            </div>
            <div class="d-none col-12" id="rightContent" style="margin-top: 20px; text-align: center;">
                <div class="fw-bold justify-content-center d-flex py-5" id="today-date">
                    <div id="event-day">Wednesday,</div>
                    <div id="event-date">19 April</div>
                </div>
                <div class="text-center">
                    <div class="events me-4 row gx-2 d-flex flex-wrap" id="meeting_daily_timings"></div>
                </div>
            </div>
        </div>
    </div>`;

    let t = document.getElementById("date"),
        n = document.getElementById("days"),
        i = document.getElementById("prev"),
        d = document.getElementById("nxt"),
        l = document.getElementById("rightContent");

    document.getElementById("activeEvent-time"),
        document.getElementById("activeConfirm-btn"),
        document.getElementsByClassName("event-time");
    let a = new Date, s = a.getMonth(), c = a.getFullYear(),
        r = a.getDate(); a.setMonth(a.getMonth() + 1);
        let v = a.getMonth(),
            o = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December",];

        function m(e, t)
        { let n = [], i = new Date(e, t, 1); for (; i.getMonth() === t;)0 === i.getDay() && n.push(i.getDate()), i.setDate(i.getDate() + 1);
            return n }

    var g = {};

        function u() {
        Date.now(); let e = new Date(c, s, 1), i = new Date(c, s + 1, 0), d = new Date(c, s, 0), a = d.getDate(), u = i.getDate(), f = e.getDay(), b = 7 - i.getDay() - 1; t.innerHTML = o[s] + " " + c; let h = ""; for (let p = f; p > 0; p--)h += `<div class='day prev-date'>${a - p + 1}</div>`; for (let $ = 1; $ <= u; $++)$ < new Date().getDate() && c === new Date().getFullYear() && s === new Date().getMonth() || m(c, s).includes($) ? h += `<div class='day tillCurrentDate'> ${$} </div>` : $ === new Date().getDate() && c === new Date().getFullYear() && s === new Date().getMonth() ? h += `<div class='day today'>${$} </div>` : s === new Date().getMonth() && c === new Date().getFullYear() || s === v && c === new Date().getFullYear() ? h += `<div class="day">${$}</div>` : h += `<div class="day futureDays">${$}</div>`; for (let x = 1; x <= b; x++)h += `<div class='day nxt-date'>${x}</div>`; n.innerHTML = h, function e() {
            let t = document.querySelectorAll(".day"), n = m(c, s); t.forEach(e => {

                e.addEventListener("click", i => {
                    console.log(e);
                    if (-1 !== n.indexOf(Number(e.textContent))) console.log("this is sunday"); else if (t.forEach(e => { e.classList.remove("active") }), e.textContent >= r && s === new Date().getMonth() || s === v && !n.includes(Number(e.textContent))) {
                        l.classList.remove("d-none"), function e(t) { let n = new Date(c, s, t), i = n.toLocaleString("en-US", { weekday: "long" }); y.innerHTML = i, w.innerHTML = ", " + o[s] + " " + t }(i.target.innerHTML), e.classList.add("active"); let d = e.innerHTML, a = document.getElementById("meeting_daily_timings"), m = "", u = "", f = "";
                        for (let hours = 9; hours <= 24; hours++) {
                            for (let minutes = 0; minutes < 60; minutes += 15) {
                                const currentTime = new Date().getTime();
                                const eventTime = new Date(c, s, d, hours, minutes, 0, 0).getTime();

                                if (eventTime <= currentTime) {
                                    u = "disabled";
                                    f = "btnDisable";
                                } else {
                                    u = "";
                                    f = "";
                                }

                                const formattedHour = new Date(c, s, d, hours, minutes, 0, 0).toLocaleString("en-GB", {
                                    hour12: !0,
                                    hour: "numeric",
                                    minute: "numeric"
                                });

                                g[new Date(c, s, d, hours).toJSON()] > 2 ?
                                    m += `<div class="button-full" id="prepTime_${hours}_${minutes}">
                    <button class="event-time meeting btn-disable" disabled > ${formattedHour}
                    </button></div>` :
                                    m += `<div class="button-full col-3" id="prepTime_${hours}_${minutes}">
                    <button onclick="confirmMeeting('${new Date(c, s, d, hours, minutes, 0, 0).toJSON()}')"
                    class="event-time meeting ${f}" ${u} > ${formattedHour}
                    </button>
                    </div>`;
                            }} return a.innerHTML = m, m
                    }
                })
            })

        }()
    } u(), i.addEventListener("click", () => { --s < 0 && (s = 11, c--), u() }),
        d.addEventListener("click", () => { ++s > 11 && (s = 0, c++), u() });
        let f = null;
        this.meetTime = e => { var t = document.getElementById(e);
                null !== f && (f.children[0].classList.remove("activeEvent-time"),
                    f.children[1].classList.remove("activeConfirm-btn")),
                    t.children[0].classList.add("activeEvent-time"),
                    t.children[1].classList.add("activeConfirm-btn"),
                    f = t };
        let y = document.getElementById("event-day"), w = document.getElementById("event-date");
        this.confirmMeeting = t => {

            //огратися з добавленням і видаленням масиву
            console.log(t);
            let IndexOfFinElement = DateArray.indexOf(t);
            console.log(IndexOfFinElement);

            if (IndexOfFinElement < 0){
                DateArray.push(t);
            } else{
                DateArray.splice(IndexOfFinElement, 1);
            }
            console.log(DateArray);
        }
}


